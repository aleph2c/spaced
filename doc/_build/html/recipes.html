
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Recipes &#8212; spaced 0.1 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="How it Works" href="how_it_works.html" />
    <link rel="prev" title="Zero to One" href="zero_to_one.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <blockquote id="recipes">
<div><p><em>Simple things should be simple, complex things should be possible.</em></p>
<p class="attribution">&mdash;Alan Kay</p>
</div></blockquote>
<div class="section" id="id1">
<h1>Recipes<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="diagrams">
<span id="recipes-diagrams"></span><h2>Diagrams<a class="headerlink" href="#diagrams" title="Permalink to this headline">¶</a></h2>
<div class="section" id="generate-learning-tracker-curves">
<span id="recipes-generate-learning-tracker-curves"></span><h3>Generate Learning Tracker Curves<a class="headerlink" href="#generate-learning-tracker-curves" title="Permalink to this headline">¶</a></h3>
<p>To generate the learning tracker curves:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">space.repitition</span> <span class="kn">import</span> <span class="n">LearningTracker</span>

<span class="n">days_to_track</span> <span class="o">=</span> <span class="mi">43</span>
<span class="n">lesson_to_graph</span> <span class="o">=</span> <span class="mi">3</span>

<span class="n">lt</span> <span class="o">=</span> <span class="n">LearningTracker</span><span class="p">(</span>
  <span class="n">epoch</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">new</span><span class="p">(),</span>
  <span class="nb">range</span><span class="o">=</span><span class="n">days_to_track</span>
<span class="p">)</span>

<span class="n">day_offset_from_epoch_and_results</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span>    <span class="mf">0.81</span><span class="p">,</span> <span class="mf">1.75</span><span class="p">,</span> <span class="mf">3.02</span><span class="p">,</span> <span class="mf">4.8</span><span class="p">,</span>  <span class="mf">8.33</span><span class="p">,</span> <span class="mf">10.93</span><span class="p">,</span> <span class="mf">16.00</span><span class="p">,</span> <span class="mf">23.00</span><span class="p">,</span> <span class="mf">29.00</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.40</span><span class="p">,</span> <span class="mf">0.44</span><span class="p">,</span> <span class="mf">0.64</span><span class="p">,</span> <span class="mf">0.84</span><span class="p">,</span> <span class="mf">0.83</span><span class="p">,</span> <span class="mf">0.89</span><span class="p">,</span>  <span class="mf">1.00</span><span class="p">,</span>  <span class="mf">0.99</span><span class="p">,</span> <span class="mf">0.99</span><span class="p">,</span>   <span class="mf">1.00</span><span class="p">],</span>
<span class="p">]</span>

<span class="c1"># mimic a full training session</span>
<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span> <span class="ow">in</span> \
  <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">day_offset_from_epoch_and_results</span><span class="p">)):</span>
  <span class="c1"># r: result</span>
  <span class="c1"># d: days since training epoch</span>
  <span class="n">lt</span><span class="o">.</span><span class="n">learned</span><span class="p">(</span><span class="n">result</span><span class="o">=</span><span class="n">r</span><span class="p">,</span> <span class="n">when</span><span class="o">=</span><span class="n">d</span><span class="p">)</span>

  <span class="c1"># plot the lesson we want to graph</span>
  <span class="k">if</span> <span class="n">index</span> <span class="ow">is</span> <span class="n">lesson_to_graph</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>

    <span class="c1"># PLOTTING THE GRAPHS</span>
    <span class="n">hdl</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">lt</span><span class="o">.</span><span class="n">plot_graphs</span><span class="p">()</span>
</pre></div>
</div>
<p>The third set of learning tracker plots would look like this:</p>
<a class="reference external image-reference" href="_static/quickstart_arbitrary.pdf"><div align="center" class="align-center"><img alt="_images/quickstart_arbitrary.svg" src="_images/quickstart_arbitrary.svg" /></div>
</a>
</div>
<div class="section" id="generate-a-reference-curve">
<span id="recipes-generate-a-reference-curve"></span><h3>Generate a Reference Curve<a class="headerlink" href="#generate-a-reference-curve" title="Permalink to this headline">¶</a></h3>
<p>To generate a reference curve:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">repetition</span> <span class="kn">import</span> <span class="n">LearningTracker</span>

<span class="c1"># create a learning tracker</span>
<span class="n">learning_tracker</span> <span class="o">=</span> <span class="n">LearningTracker</span><span class="p">(</span><span class="n">epoch</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>
<span class="n">hdl</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">learning_tracker</span><span class="o">.</span><span class="n">reference</span><span class="o">.</span><span class="n">plot_graph</span><span class="p">()</span>

<span class="c1"># to save this plot (usual api, since I can&#39;t imagine why a</span>
<span class="c1"># regular user would save the reference, but I have included it</span>
<span class="c1"># as a recipe since I needed to do this to document this package</span>
<span class="n">hdl</span><span class="o">.</span><span class="n">ppd</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;quickstart_reference.svg&quot;</span><span class="p">)</span>
<span class="n">hdl</span><span class="o">.</span><span class="n">ppd</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;quickstart_reference.pdf&quot;</span><span class="p">)</span>

<span class="n">hdl</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<a class="reference external image-reference" href="_static/quickstart_reference.pdf"><div align="center" class="align-center"><img alt="_images/quickstart_reference.svg" src="_images/quickstart_reference.svg" /></div>
</a>
</div>
<div class="section" id="save-a-diagram">
<span id="recipes-save-a-diagram"></span><h3>Save a Diagram<a class="headerlink" href="#save-a-diagram" title="Permalink to this headline">¶</a></h3>
<p>To save a diagram:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">space.repitition</span> <span class="kn">import</span> <span class="n">LearningTracker</span>
<span class="n">lt</span> <span class="o">=</span> <span class="n">LearningTracker</span><span class="p">(</span>
  <span class="n">epoch</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">new</span><span class="p">(),</span>
<span class="p">)</span>

<span class="n">hdl</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">lt</span><span class="o">.</span><span class="n">plot_graphs</span><span class="p">()</span>

<span class="c1"># SAVE SVG</span>
<span class="n">lt</span><span class="o">.</span><span class="n">save_figure</span><span class="p">(</span><span class="s2">&quot;replace_with_the_filename_you_want.svg&quot;</span><span class="p">)</span>

<span class="c1"># SAVE PNG</span>
<span class="n">lt</span><span class="o">.</span><span class="n">save_figure</span><span class="p">(</span><span class="s2">&quot;replace_with_the_filename_you_want.png&quot;</span><span class="p">)</span>

<span class="c1"># SAVE PDF</span>
<span class="n">lt</span><span class="o">.</span><span class="n">save_figure</span><span class="p">(</span><span class="s2">&quot;replace_with_the_filename_you_want.pdf&quot;</span><span class="p">)</span>

<span class="n">hdl</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="closing-the-graph-handle">
<span id="recipes-closing-the-graph-handle"></span><h3>Closing the Graph Handle<a class="headerlink" href="#closing-the-graph-handle" title="Permalink to this headline">¶</a></h3>
<p>Under the hook <code class="docutils literal notranslate"><span class="pre">spaced</span></code> uses <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>.  The <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> library
recommends that graph handles are closed when you are finished looking at the
graph so as to save system memory:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">space.repitition</span> <span class="kn">import</span> <span class="n">LearningTracker</span>
<span class="n">lt</span> <span class="o">=</span> <span class="n">LearningTracker</span><span class="p">(</span><span class="n">epoch</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">new</span><span class="p">())</span>

<span class="c1"># plot something</span>
<span class="n">hdl</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">lt</span><span class="o">.</span><span class="n">plot_graphs</span><span class="p">()</span>

<span class="c1"># CLOSE THE GRAPH HANDLE</span>
<span class="n">hdl</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="videos">
<span id="recipes-videos"></span><h2>Videos<a class="headerlink" href="#videos" title="Permalink to this headline">¶</a></h2>
<div class="section" id="installing-ffmpeg">
<span id="recipes-ensure-ffmpeg-is-installed"></span><h3>Installing ffmpeg<a class="headerlink" href="#installing-ffmpeg" title="Permalink to this headline">¶</a></h3>
<p>In a linux system or WLS running a Debian distribution:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt update
sudo apt-get install ffmpeg
</pre></div>
</div>
</div>
<div class="section" id="animating-a-learning-tracker">
<span id="recipes-animating-a-learning-tracker"></span><h3>Animating a Learning Tracker<a class="headerlink" href="#animating-a-learning-tracker" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">repetition</span> <span class="kn">import</span> <span class="n">LearningTracker</span>

<span class="n">day_offset_from_epoch_and_results</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span>    <span class="mf">0.81</span><span class="p">,</span> <span class="mf">1.75</span><span class="p">,</span> <span class="mf">3.02</span><span class="p">,</span> <span class="mf">4.8</span><span class="p">,</span>  <span class="mf">8.33</span><span class="p">,</span> <span class="mf">10.93</span><span class="p">,</span> <span class="mf">16.00</span><span class="p">,</span> <span class="mf">23.00</span><span class="p">,</span> <span class="mf">29.00</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.40</span><span class="p">,</span> <span class="mf">0.44</span><span class="p">,</span> <span class="mf">0.64</span><span class="p">,</span> <span class="mf">0.84</span><span class="p">,</span> <span class="mf">0.83</span><span class="p">,</span> <span class="mf">0.89</span><span class="p">,</span>  <span class="mf">1.00</span><span class="p">,</span>  <span class="mf">0.99</span><span class="p">,</span> <span class="mf">0.99</span><span class="p">,</span>   <span class="mf">1.00</span><span class="p">],</span>
<span class="p">]</span>

<span class="c1"># create a learning tracker with arbitrary default parameters</span>
<span class="n">lt_arbitrary</span> <span class="o">=</span> <span class="n">LearningTracker</span><span class="p">(</span>
  <span class="n">epoch</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">d</span><span class="p">,</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">day_offset_from_epoch_and_results</span><span class="p">):</span>
  <span class="c1"># r: result</span>
  <span class="c1"># d: days since training epoch</span>
  <span class="n">lt_arbitrary</span><span class="o">.</span><span class="n">learned</span><span class="p">(</span><span class="n">result</span><span class="o">=</span><span class="n">r</span><span class="p">,</span> <span class="n">when</span><span class="o">=</span><span class="n">d</span><span class="p">)</span>

<span class="n">lt</span><span class="o">.</span><span class="n">animate</span><span class="p">(</span>
  <span class="n">student</span><span class="o">=</span><span class="s2">&quot;Name of Student&quot;</span><span class="p">,</span>
  <span class="n">name_of_mp4</span><span class="o">=</span><span class="s2">&quot;results/report_card.mp4&quot;</span><span class="p">,</span>
  <span class="n">time_per_event_in_seconds</span><span class="o">=</span><span class="mf">2.2</span><span class="p">)</span>
</pre></div>
</div>
<p>This would generate the following <code class="docutils literal notranslate"><span class="pre">mp4</span></code>:</p>
<center>
<iframe width="560" height="315" src="https://www.youtube.com/embed/H8llYuwH5L0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</center></div>
</div>
<div class="section" id="forgetting-curves">
<span id="recipes-forgetting-curves"></span><h2>Forgetting Curves<a class="headerlink" href="#forgetting-curves" title="Permalink to this headline">¶</a></h2>
<div class="section" id="tuning-your-forgetting-curves">
<span id="recipes-tuning-your-forgetting-curves"></span><h3>Tuning your forgetting curves<a class="headerlink" href="#tuning-your-forgetting-curves" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">fdecay0</span></code> and <code class="docutils literal notranslate"><span class="pre">fdecaytau</span></code> parameters control the forgetting curves:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">repetition</span> <span class="kn">import</span> <span class="n">LearningTracker</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="n">start_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>

<span class="c1"># setting up our reference (goals)</span>
<span class="n">lt</span> <span class="o">=</span> <span class="n">LearningTracker</span><span class="p">(</span>
  <span class="n">fdecaytau</span><span class="o">=</span><span class="mf">1.00</span><span class="p">,</span>  <span class="c1"># ability to improve after a lesson, lower is better</span>
  <span class="n">fdecay0</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span>     <span class="c1"># seen it before? then pick lower numbers</span>
  <span class="n">epoch</span><span class="o">=</span><span class="n">start_time</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="forgetting-curve-model-discovery">
<span id="recipes-forgetting-curve-model-discovery"></span><h3>Forgetting curve model discovery<a class="headerlink" href="#forgetting-curve-model-discovery" title="Permalink to this headline">¶</a></h3>
<p>Use information from one learning tracker session to build a better set of goals
for another:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">repetition</span> <span class="kn">import</span> <span class="n">LearningTracker</span>

<span class="n">day_offset_from_epoch_and_results</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span>    <span class="mf">0.81</span><span class="p">,</span> <span class="mf">1.75</span><span class="p">,</span> <span class="mf">3.02</span><span class="p">,</span> <span class="mf">4.8</span><span class="p">,</span>  <span class="mf">8.33</span><span class="p">,</span> <span class="mf">10.93</span><span class="p">,</span> <span class="mf">16.00</span><span class="p">,</span> <span class="mf">23.00</span><span class="p">,</span> <span class="mf">29.00</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.40</span><span class="p">,</span> <span class="mf">0.44</span><span class="p">,</span> <span class="mf">0.64</span><span class="p">,</span> <span class="mf">0.84</span><span class="p">,</span> <span class="mf">0.83</span><span class="p">,</span> <span class="mf">0.89</span><span class="p">,</span>  <span class="mf">1.00</span><span class="p">,</span>  <span class="mf">0.99</span><span class="p">,</span> <span class="mf">0.99</span><span class="p">,</span>   <span class="mf">1.00</span><span class="p">],</span>
<span class="p">]</span>

<span class="c1"># create a learning tracker with arbitrary default parameters</span>
<span class="n">lt_arbitrary</span> <span class="o">=</span> <span class="n">LearningTracker</span><span class="p">(</span>
  <span class="n">epoch</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span>
<span class="p">)</span>

<span class="c1"># mimic a full training session</span>
<span class="k">for</span> <span class="n">d</span><span class="p">,</span> <span class="n">r</span> <span class="ow">in</span> \
  <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">day_offset_from_epoch_and_results</span><span class="p">):</span>
  <span class="c1"># r: result</span>
  <span class="c1"># d: days since training epoch</span>
  <span class="n">lt_arbitrary</span><span class="o">.</span><span class="n">learned</span><span class="p">(</span><span class="n">result</span><span class="o">=</span><span class="n">r</span><span class="p">,</span> <span class="n">when</span><span class="o">=</span><span class="n">d</span><span class="p">)</span>

<span class="c1"># get better initial model parameters based on previous</span>
<span class="c1"># experience with the student</span>

<span class="c1"># to get the discovered parameter from a previous training session,</span>
<span class="c1"># pre-pend &#39;discovered&#39; in front of the parameter name,</span>
<span class="c1"># and call this word like a function</span>
<span class="n">bf0</span> <span class="o">=</span> <span class="n">lt_arbitrary</span><span class="o">.</span><span class="n">discovered_fdecay0</span><span class="p">()</span>
<span class="n">bft</span> <span class="o">=</span> <span class="n">lt_arbitrary</span><span class="o">.</span><span class="n">discovered_fdecaytau</span><span class="p">()</span>

<span class="c1"># a better learning tracker</span>
<span class="n">lt_better_fit</span> <span class="o">=</span> <span class="n">LearningTracker</span><span class="p">(</span>
  <span class="n">epoch</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span>
  <span class="n">fdecay0</span><span class="o">=</span><span class="n">bf0</span><span class="p">,</span>
  <span class="n">fdecaytau</span><span class="o">=</span><span class="n">bft</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="plasticity-curves">
<span id="recipes-plasticity-curves"></span><h2>Plasticity Curves<a class="headerlink" href="#plasticity-curves" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">plasticity_root</span></code> and <code class="docutils literal notranslate"><span class="pre">plasticity_denominator_offset</span></code> parameters control the reference plasticity curve:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">repetition</span> <span class="kn">import</span> <span class="n">LearningTracker</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="n">start_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>

<span class="c1">#                    x**(1.0/plasticity_root)</span>
<span class="c1"># r = ---------------------------------------------------------</span>
<span class="c1">#     (x+plasticity_denominator_offset)**(1.0/plasticity_root)</span>

<span class="c1"># setting up our reference-plasticity</span>
<span class="c1"># (long term memory formation)</span>
<span class="n">hr</span> <span class="o">=</span> <span class="n">LearningTracker</span><span class="p">(</span>
  <span class="n">plasticity_root</span><span class="o">=</span><span class="mf">1.8</span><span class="p">,</span> <span class="c1"># for slower learning pick lower numbers</span>
  <span class="n">plasticity_denominator_offset</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="section" id="plasticity-curve-model-discovery">
<span id="recipes-plasticity-curve-model-discovery"></span><h3>Plasticity Curve Model Discovery<a class="headerlink" href="#plasticity-curve-model-discovery" title="Permalink to this headline">¶</a></h3>
<p>Use information from one learning tracker session to build a better set of goals
for another:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">repetition</span> <span class="kn">import</span> <span class="n">LearningTracker</span>

<span class="n">day_offset_from_epoch_and_results</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span>    <span class="mf">0.81</span><span class="p">,</span> <span class="mf">1.75</span><span class="p">,</span> <span class="mf">3.02</span><span class="p">,</span> <span class="mf">4.8</span><span class="p">,</span>  <span class="mf">8.33</span><span class="p">,</span> <span class="mf">10.93</span><span class="p">,</span> <span class="mf">16.00</span><span class="p">,</span> <span class="mf">23.00</span><span class="p">,</span> <span class="mf">29.00</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.40</span><span class="p">,</span> <span class="mf">0.44</span><span class="p">,</span> <span class="mf">0.64</span><span class="p">,</span> <span class="mf">0.84</span><span class="p">,</span> <span class="mf">0.83</span><span class="p">,</span> <span class="mf">0.89</span><span class="p">,</span>  <span class="mf">1.00</span><span class="p">,</span>  <span class="mf">0.99</span><span class="p">,</span> <span class="mf">0.99</span><span class="p">,</span>   <span class="mf">1.00</span><span class="p">],</span>
<span class="p">]</span>

<span class="c1"># create a learning tracker with arbitrary default parameters</span>
<span class="n">lt_arbitrary</span> <span class="o">=</span> <span class="n">LearningTracker</span><span class="p">(</span>
  <span class="n">epoch</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span>
<span class="p">)</span>

<span class="c1"># mimic a full training session</span>
<span class="k">for</span> <span class="n">d</span><span class="p">,</span> <span class="n">r</span> <span class="ow">in</span> \
  <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">day_offset_from_epoch_and_results</span><span class="p">):</span>
  <span class="c1"># r: result</span>
  <span class="c1"># d: days since training epoch</span>
  <span class="n">lt_arbitrary</span><span class="o">.</span><span class="n">learned</span><span class="p">(</span><span class="n">result</span><span class="o">=</span><span class="n">r</span><span class="p">,</span> <span class="n">when</span><span class="o">=</span><span class="n">d</span><span class="p">)</span>

<span class="c1"># get better initial model parameters based on previous</span>
<span class="c1"># experience with the student</span>

<span class="c1"># to get the discovered parameter from a previous training session,</span>
<span class="c1"># pre-pend &#39;discovered&#39; in front of the parameter name,</span>
<span class="c1"># and call this word like a function</span>
<span class="n">bpr</span> <span class="o">=</span> <span class="n">lt_arbitrary</span><span class="o">.</span><span class="n">discovered_plasticity_root</span><span class="p">()</span>
<span class="n">bpdo</span> <span class="o">=</span> <span class="n">lt_arbitrary</span><span class="o">.</span><span class="n">discovered_plasticity_denominator_offset</span><span class="p">()</span>

<span class="c1"># a better learning tracker</span>
<span class="n">lt_better_fit</span> <span class="o">=</span> <span class="n">LearningTracker</span><span class="p">(</span>
  <span class="n">epoch</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span>
  <span class="n">plasticity_root</span><span class="o">=</span><span class="n">bpr</span><span class="p">,</span>
  <span class="n">plasticity_denominator_offset</span><span class="o">=</span><span class="n">bpdo</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="feedback">
<span id="recipes-feedback"></span><h2>Feedback<a class="headerlink" href="#feedback" title="Permalink to this headline">¶</a></h2>
<p>To give feedback to a learning tracker:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timedelta</span>
<span class="kn">from</span> <span class="nn">repetition</span> <span class="kn">import</span> <span class="n">LearningTracker</span>
<span class="n">epoch</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="n">lt</span> <span class="o">=</span> <span class="n">LearningTracker</span><span class="p">(</span><span class="n">epoch</span><span class="o">=</span><span class="n">epoch</span><span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="mf">0.33</span> <span class="c1"># thirty three percent recollection</span>
<span class="n">day_offset_from_epoch</span> <span class="o">=</span> <span class="mf">0.80</span>
<span class="n">lt</span><span class="o">.</span><span class="n">learned</span><span class="p">(</span><span class="n">result</span><span class="o">=</span><span class="n">result</span><span class="p">,</span> <span class="n">when</span><span class="o">=</span><span class="n">day_offset_from_epoch</span><span class="p">)</span>

<span class="c1"># the learning tracker can also accept datetime inputs</span>
<span class="n">result</span> <span class="o">=</span> <span class="mf">0.45</span> <span class="c1"># forty five percent recollection</span>
<span class="n">day_offset_from_epoch</span> <span class="o">=</span> <span class="mf">1.20</span>
<span class="n">lt</span><span class="o">.</span><span class="n">learned</span><span class="p">(</span>
  <span class="n">result</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
  <span class="n">when</span><span class="o">=</span><span class="n">epoch</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">day_offset_from_epoch</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="control">
<span id="recipes-control"></span><h2>Control<a class="headerlink" href="#control" title="Permalink to this headline">¶</a></h2>
<div class="section" id="what-is-being-controlled-anyway">
<span id="recipes-what-is-being-controlled-anyway"></span><h3>What is Being Controlled Anyway?<a class="headerlink" href="#what-is-being-controlled-anyway" title="Permalink to this headline">¶</a></h3>
<p>For a control system to work, we need to know a few things. We need to know what
we want, this is called the reference, and we need to know what actually
happened, this is called feedback.</p>
<p>As previously mentioned, the reference is the dark blue line representing the
plasticity curve in the first graph.</p>
<p>With the spaced algorithm, the feedback data is used to build a second
plasticity curve, which can be seen in the second and forth boxes as a light
blue line. This second plasticity curve is the observed plasticity curve. It is
a model of how the student is actually learning the idea being tracked. While
spaced is making this curve, it puts extra emphasis on the most recent data
provided by the student. This is because a student’s recent understanding should
outweigh their previous ignorance. The observed plasticity curve is constructed
using the curve_fit method of the <code class="docutils literal notranslate"><span class="pre">scipy.optimize</span></code> library. The curve_fit method
finds values of plasticity_root and plasticity_denominator_offset that minimize
the difference between the observed plasticity curve, and the feedback provided
by the student.</p>
<p>After a training session, the spaced algorithm shifts the blue reference line
such that it intersects with the light blue observed plasticity curve, then
re-draws the forgetting curves, which causes projections onto the timeline which
represent the updated schedule (This is a kind of feedforward loop). Well, this
is very close to what happens, we are missing one little step.</p>
<p>When we begin to track a student’s learning, we make assumptions about how fast
they forget. But we don’t actually know how fast they will forget something, so
the spaced algorithm tries to match the forgetting curves used by the control
graph, to what they look like in the student’s observed graph.</p>
<p>Specifically, the <code class="docutils literal notranslate"><span class="pre">fdecaytau</span></code> and the <code class="docutils literal notranslate"><span class="pre">fdecay0</span></code> are adjusted, so that the forgetting
curves in the control graph fall at similar rates as they do in the observed
graph. It will be very difficult to tune these control parameters, since we have
no way of actually modeling the system. (the interaction between the student’s
mind, their environment, the training material, the context in which they
train…) For now, we will be happy with making mistakes in the right direction.</p>
</div>
<div class="section" id="changing-the-control-parameters">
<span id="recipes-changing-the-control-parameters"></span><h3>Changing the Control Parameters<a class="headerlink" href="#changing-the-control-parameters" title="Permalink to this headline">¶</a></h3>
<p>To change the control system parameters:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">repetition</span> <span class="kn">import</span> <span class="n">LearningTracker</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timedelta</span>

<span class="n">start_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> \
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span>    <span class="mf">0.81</span><span class="p">,</span> <span class="mf">1.75</span><span class="p">,</span> <span class="mf">3.02</span><span class="p">,</span> <span class="mf">4.8</span><span class="p">,</span>  <span class="mf">8.33</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.40</span><span class="p">,</span> <span class="mf">0.44</span><span class="p">,</span> <span class="mf">0.64</span><span class="p">,</span> <span class="mf">0.84</span><span class="p">,</span> <span class="mf">0.83</span><span class="p">,</span> <span class="mf">0.89</span><span class="p">]</span>

<span class="n">range_in_days</span> <span class="o">=</span> <span class="mi">45</span>

<span class="c1"># you can feed custom control parameters to the learning tracker</span>
<span class="n">lt</span> <span class="o">=</span> <span class="n">LearningTracker</span><span class="p">(</span>
              <span class="n">epoch</span><span class="o">=</span><span class="n">start_time</span><span class="p">,</span>
              <span class="nb">range</span><span class="o">=</span><span class="n">range_in_days</span><span class="p">)</span>
              <span class="n">fdecaytau_kp</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>  <span class="c1"># kp for fdecay control (PID)</span>
              <span class="n">fdecaytau_ki</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>  <span class="c1"># ki &quot; &quot;</span>
              <span class="n">fdecaytau_kd</span><span class="o">=</span><span class="mf">0.04</span><span class="p">,</span> <span class="c1"># kd &quot; &quot;</span>
              <span class="n">fdecay0_kp</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>    <span class="c1"># kp for fdecaytau_kp (PID)</span>
              <span class="n">fdecay0_ki</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>    <span class="c1"># ki &quot; &quot;</span>
              <span class="n">fdecay0_kd</span><span class="o">=</span><span class="mf">0.03</span><span class="p">,</span>   <span class="c1"># kd &quot; &quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="queries">
<span id="recipes-queries"></span><h2>Queries<a class="headerlink" href="#queries" title="Permalink to this headline">¶</a></h2>
<div class="section" id="get-a-useful-set-of-datetimes">
<span id="recipes-get-a-useful-set-of-datetimes"></span><h3>Get a useful set of Datetimes<a class="headerlink" href="#get-a-useful-set-of-datetimes" title="Permalink to this headline">¶</a></h3>
<p>Get a useful range of datetimes from a learning tracker (used for graphing with
queries).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">repetition</span> <span class="kn">import</span> <span class="n">LearningTracker</span>

<span class="c1"># create a learning tracker</span>
<span class="n">lt</span> <span class="o">=</span> <span class="n">LearningTracker</span><span class="p">(</span>
  <span class="n">epoch</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span>
<span class="p">)</span>

<span class="c1"># give our learning tracker some feedback</span>
<span class="k">for</span> <span class="n">d</span><span class="p">,</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span>    <span class="mf">0.8</span><span class="p">,</span>  <span class="mf">1.75</span><span class="p">,</span> <span class="mf">3.02</span><span class="p">,</span> <span class="mf">4.8</span><span class="p">,</span>  <span class="mf">7.33</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.40</span><span class="p">,</span> <span class="mf">0.44</span><span class="p">,</span> <span class="mf">0.64</span><span class="p">,</span> <span class="mf">0.76</span><span class="p">,</span> <span class="mf">0.83</span><span class="p">,</span> <span class="mf">0.89</span><span class="p">],</span>
  <span class="p">):</span>
  <span class="c1"># r: result</span>
  <span class="c1"># d: days since training epoch</span>
  <span class="n">lt</span><span class="o">.</span><span class="n">learned</span><span class="p">(</span><span class="n">result</span><span class="o">=</span><span class="n">r</span><span class="p">,</span> <span class="n">when</span><span class="o">=</span><span class="n">d</span><span class="p">)</span>

<span class="c1"># get a set of datetimes</span>
<span class="n">useful_range_of_datetimes</span> <span class="o">=</span> \
  <span class="n">lt</span><span class="o">.</span><span class="n">range_for</span><span class="p">(</span><span class="n">curve</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">day_step_size</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="serialization">
<span id="recipes-serialization"></span><h2>Serialization<a class="headerlink" href="#serialization" title="Permalink to this headline">¶</a></h2>
<p>The learning tracker has a custom pickler so you can serialize it.</p>
<div class="section" id="pickle-a-learningtracker-into-a-bytestream">
<span id="recipes-pickle-a-learningtracker"></span><h3>Pickle a LearningTracker into a Bytestream<a class="headerlink" href="#pickle-a-learningtracker-into-a-bytestream" title="Permalink to this headline">¶</a></h3>
<p>To pickle a learning tracker into a bytestream:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pickle</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">repetition</span> <span class="kn">import</span> <span class="n">LearningTracker</span>

<span class="c1"># create a learning tracker</span>
<span class="n">lt</span> <span class="o">=</span> <span class="n">LearningTracker</span><span class="p">(</span><span class="n">epoch</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>

<span class="c1"># create a byte stream</span>
<span class="n">byte_stream</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">lt</span><span class="p">)</span>

<span class="c1"># re-create the object from the bytestream (should be small)</span>
<span class="c1"># (plural for byte stream)</span>
<span class="n">unpickled_learning_tracker</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">byte_stream</span><span class="p">)</span>

<span class="n">hdl</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">unpickled_learning_tracker</span><span class="o">.</span><span class="n">plot_graphs</span><span class="p">()</span>
<span class="n">hdl</span><span class="o">.</span><span class="n">plot_graphs</span><span class="p">()</span> <span class="c1"># plots the graph</span>

<span class="c1"># close the plot to save memory</span>
<span class="n">hdl</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="pickle-a-learningtracker-into-a-file">
<span id="recipes-pickle-a-learningtracker-into-a-file"></span><h3>Pickle a LearningTracker into a File<a class="headerlink" href="#pickle-a-learningtracker-into-a-file" title="Permalink to this headline">¶</a></h3>
<p>To pickle a learning tracker to a file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pickle</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">repetition</span> <span class="kn">import</span> <span class="n">LearningTracker</span>

<span class="c1"># create a learning tracker</span>
<span class="n">lt</span> <span class="o">=</span> <span class="n">LearningTracker</span><span class="p">(</span><span class="n">epoch</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>

<span class="c1"># pickle the learning tracker</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;leaning_tracker.pickle&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
  <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">lt</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">pickle</span><span class="o">.</span><span class="n">HIGHEST_PROTOCOL</span><span class="p">)</span>

<span class="c1"># to turn the &#39;learning_tracker.pickle&#39; file back into</span>
<span class="c1"># an object</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;learning_tracker.pickle&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
  <span class="c1"># (no-plural for byte stream)</span>
  <span class="n">unpickled_learning_tracker</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="model-learning">
<span id="recipes-model-learning"></span><h2>Model Learning<a class="headerlink" href="#model-learning" title="Permalink to this headline">¶</a></h2>
<a class="reference internal" href="zero_to_one.html"<span class="std-ref">prev</span></a>, <a class="reference internal" href="index.html#top"><span class="std std-ref">top</span></a>, <a class="reference internal" href="how_it_works.html"><span class="std std-ref">next</span></a></div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="logo"><a href="index.html">
  <img class="logo_a" src="_static/spaced_1.svg" width="250" alt="Logo" >
</a></p>
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Recipes</a><ul>
<li><a class="reference internal" href="#diagrams">Diagrams</a><ul>
<li><a class="reference internal" href="#generate-learning-tracker-curves">Generate Learning Tracker Curves</a></li>
<li><a class="reference internal" href="#generate-a-reference-curve">Generate a Reference Curve</a></li>
<li><a class="reference internal" href="#save-a-diagram">Save a Diagram</a></li>
<li><a class="reference internal" href="#closing-the-graph-handle">Closing the Graph Handle</a></li>
</ul>
</li>
<li><a class="reference internal" href="#videos">Videos</a><ul>
<li><a class="reference internal" href="#installing-ffmpeg">Installing ffmpeg</a></li>
<li><a class="reference internal" href="#animating-a-learning-tracker">Animating a Learning Tracker</a></li>
</ul>
</li>
<li><a class="reference internal" href="#forgetting-curves">Forgetting Curves</a><ul>
<li><a class="reference internal" href="#tuning-your-forgetting-curves">Tuning your forgetting curves</a></li>
<li><a class="reference internal" href="#forgetting-curve-model-discovery">Forgetting curve model discovery</a></li>
</ul>
</li>
<li><a class="reference internal" href="#plasticity-curves">Plasticity Curves</a><ul>
<li><a class="reference internal" href="#plasticity-curve-model-discovery">Plasticity Curve Model Discovery</a></li>
</ul>
</li>
<li><a class="reference internal" href="#feedback">Feedback</a></li>
<li><a class="reference internal" href="#control">Control</a><ul>
<li><a class="reference internal" href="#what-is-being-controlled-anyway">What is Being Controlled Anyway?</a></li>
<li><a class="reference internal" href="#changing-the-control-parameters">Changing the Control Parameters</a></li>
</ul>
</li>
<li><a class="reference internal" href="#queries">Queries</a><ul>
<li><a class="reference internal" href="#get-a-useful-set-of-datetimes">Get a useful set of Datetimes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#serialization">Serialization</a><ul>
<li><a class="reference internal" href="#pickle-a-learningtracker-into-a-bytestream">Pickle a LearningTracker into a Bytestream</a></li>
<li><a class="reference internal" href="#pickle-a-learningtracker-into-a-file">Pickle a LearningTracker into a File</a></li>
</ul>
</li>
<li><a class="reference internal" href="#model-learning">Model Learning</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="zero_to_one.html" title="previous chapter">Zero to One</a></li>
      <li>Next: <a href="how_it_works.html" title="next chapter">How it Works</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/recipes.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Scott Volk.
      
      |
      <a href="_sources/recipes.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>